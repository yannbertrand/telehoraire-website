import{m as I,n as U,p as M,q as V,s as L,v as G,x as W,y as O,z as J,g as v,A as q,B as x,C as K,D as Q,E as X,G as Y,H as Z,I as E,J as ee,u as C,K as te,L as re,k as z,M as se,N as R,o as P,c as $,O as ae,t as ie,F as ne,r as oe,P as ce,Q as le,f as de,w as N,a as j}from"./B9KYibiD.js";async function ue(e,t){return await fe(t).catch(a=>(console.error("Failed to get image meta for "+t,a+""),{width:0,height:0,ratio:0}))}async function fe(e){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((t,r)=>{const a=new Image;a.onload=()=>{const s={width:a.width,height:a.height,ratio:a.width/a.height};t(s)},a.onerror=s=>r(s),a.src=e})}function B(e){return t=>t?e[t]||t:e.missingValue}function ge({formatter:e,keyMap:t,joinWith:r="/",valueMap:a}={}){e||(e=(i,n)=>`${i}=${n}`),t&&typeof t!="function"&&(t=B(t));const s=a||{};return Object.keys(s).forEach(i=>{typeof s[i]!="function"&&(s[i]=B(s[i]))}),(i={})=>Object.entries(i).filter(([o,u])=>typeof u<"u").map(([o,u])=>{const f=s[o];return typeof f=="function"&&(u=f(i[o])),o=typeof t=="function"?t(o):o,e(o,u)}).join(r)}function _(e=""){if(typeof e=="number")return e;if(typeof e=="string"&&e.replace("px","").match(/^\d+$/g))return Number.parseInt(e,10)}function me(e=""){if(e===void 0||!e.length)return[];const t=new Set;for(const r of e.split(" ")){const a=Number.parseInt(r.replace("x",""));a&&t.add(a)}return Array.from(t)}function he(e){if(e.length===0)throw new Error("`densities` must not be empty, configure to `1` to render regular size only (DPR 1.0)")}function pe(e){const t={};if(typeof e=="string")for(const r of e.split(/[\s,]+/).filter(a=>a)){const a=r.split(":");a.length!==2?t["1px"]=a[0].trim():t[a[0].trim()]=a[1].trim()}else Object.assign(t,e);return t}function ye(e){const t={options:e},r=(s,i={})=>k(t,s,i),a=(s,i={},n={})=>r(s,{...n,modifiers:L(i,n.modifiers||{})}).url;for(const s in e.presets)a[s]=(i,n,o)=>a(i,n,{...e.presets[s],...o});return a.options=e,a.getImage=r,a.getMeta=(s,i)=>_e(t,s,i),a.getSizes=(s,i)=>be(t,s,i),t.$img=a,a}async function _e(e,t,r){const a=k(e,t,{...r});return typeof a.getMeta=="function"?await a.getMeta():await ue(e,a.url)}function k(e,t,r){var f,h;if(t&&typeof t!="string")throw new TypeError(`input must be a string (received ${typeof t}: ${JSON.stringify(t)})`);if(!t||t.startsWith("data:"))return{url:t};const{provider:a,defaults:s}=ve(e,r.provider||e.options.provider),i=we(e,r.preset);if(t=I(t)?t:U(t),!a.supportsAlias){for(const l in e.options.alias)if(t.startsWith(l)){const y=e.options.alias[l];y&&(t=M(y,t.slice(l.length)))}}if(a.validateDomains&&I(t)){const l=V(t).host;if(!e.options.domains.find(y=>y===l))return{url:t}}const n=L(r,i,s);n.modifiers={...n.modifiers};const o=n.modifiers.format;(f=n.modifiers)!=null&&f.width&&(n.modifiers.width=_(n.modifiers.width)),(h=n.modifiers)!=null&&h.height&&(n.modifiers.height=_(n.modifiers.height));const u=a.getImage(t,n,e);return u.format=u.format||o||"",u}function ve(e,t){const r=e.options.providers[t];if(!r)throw new Error("Unknown provider: "+t);return r}function we(e,t){if(!t)return{};if(!e.options.presets[t])throw new Error("Unknown preset: "+t);return e.options.presets[t]}function be(e,t,r){var b,D,m,c,g;const a=_((b=r.modifiers)==null?void 0:b.width),s=_((D=r.modifiers)==null?void 0:D.height),i=pe(r.sizes),n=(m=r.densities)!=null&&m.trim()?me(r.densities.trim()):e.options.densities;he(n);const o=a&&s?s/a:0,u=[],f=[];if(Object.keys(i).length>=1){for(const d in i){const p=T(d,String(i[d]),s,o,e);if(p!==void 0){u.push({size:p.size,screenMaxWidth:p.screenMaxWidth,media:`(max-width: ${p.screenMaxWidth}px)`});for(const S of n)f.push({width:p._cWidth*S,src:H(e,t,r,p,S)})}}De(u)}else for(const d of n){const p=Object.keys(i)[0];let S=p?T(p,String(i[p]),s,o,e):void 0;S===void 0&&(S={size:"",screenMaxWidth:0,_cWidth:(c=r.modifiers)==null?void 0:c.width,_cHeight:(g=r.modifiers)==null?void 0:g.height}),f.push({width:d,src:H(e,t,r,S,d)})}Se(f);const h=f[f.length-1],l=u.length?u.map(d=>`${d.media?d.media+" ":""}${d.size}`).join(", "):void 0,y=l?"w":"x",w=f.map(d=>`${d.src} ${d.width}${y}`).join(", ");return{sizes:l,srcset:w,src:h==null?void 0:h.src}}function T(e,t,r,a,s){const i=s.options.screens&&s.options.screens[e]||Number.parseInt(e),n=t.endsWith("vw");if(!n&&/^\d+$/.test(t)&&(t=t+"px"),!n&&!t.endsWith("px"))return;let o=Number.parseInt(t);if(!i||!o)return;n&&(o=Math.round(o/100*i));const u=a?Math.round(o*a):r;return{size:t,screenMaxWidth:i,_cWidth:o,_cHeight:u}}function H(e,t,r,a,s){return e.$img(t,{...r.modifiers,width:a._cWidth?a._cWidth*s:void 0,height:a._cHeight?a._cHeight*s:void 0},r)}function De(e){var r;e.sort((a,s)=>a.screenMaxWidth-s.screenMaxWidth);let t=null;for(let a=e.length-1;a>=0;a--){const s=e[a];s.media===t&&e.splice(a,1),t=s.media}for(let a=0;a<e.length;a++)e[a].media=((r=e[a+1])==null?void 0:r.media)||""}function Se(e){e.sort((r,a)=>r.width-a.width);let t=null;for(let r=e.length-1;r>=0;r--){const a=e[r];a.width===t&&e.splice(r,1),t=a.width}}const qe=ge({keyMap:{format:"f",fit:"fit",width:"w",height:"h",resize:"s",quality:"q",background:"b"},joinWith:"&",formatter:(e,t)=>W(e)+"_"+W(t)}),xe=(e,{modifiers:t={},baseURL:r}={},a)=>{t.width&&t.height&&(t.resize=`${t.width}x${t.height}`,delete t.width,delete t.height);const s=qe(t)||"_";return r||(r=M(a.options.nuxt.baseURL,"/_ipx")),{url:M(r,s,G(e))}},Pe=!0,$e=!0,ze=Object.freeze(Object.defineProperty({__proto__:null,getImage:xe,supportsAlias:$e,validateDomains:Pe},Symbol.toStringTag,{value:"Module"})),A={screens:{xs:320,sm:640,md:768,lg:1024,xl:1280,xxl:1536,"2xl":1536},presets:{},provider:"ipxStatic",domains:["img.bouygtel.fr","static-cdn.tv.sfr.net"],alias:{},densities:[1,2],format:["webp"]};A.providers={ipxStatic:{provider:ze,defaults:{}}};const F=()=>{const e=J(),t=O();return t.$img||t._img||(t._img=ye({...A,nuxt:{baseURL:e.app.baseURL},runtimeConfig:e}))};function Ce(e){var t;(t=performance==null?void 0:performance.mark)==null||t.call(performance,"mark_feature_usage",{detail:{feature:e}})}const Me={src:{type:String,required:!1},format:{type:String,required:!1},quality:{type:[Number,String],required:!1},background:{type:String,required:!1},fit:{type:String,required:!1},modifiers:{type:Object,required:!1},preset:{type:String,required:!1},provider:{type:String,required:!1},sizes:{type:[Object,String],required:!1},densities:{type:String,required:!1},preload:{type:[Boolean,Object],required:!1},width:{type:[String,Number],required:!1},height:{type:[String,Number],required:!1},alt:{type:String,required:!1},referrerpolicy:{type:String,required:!1},usemap:{type:String,required:!1},longdesc:{type:String,required:!1},ismap:{type:Boolean,required:!1},loading:{type:String,required:!1,validator:e=>["lazy","eager"].includes(e)},crossorigin:{type:[Boolean,String],required:!1,validator:e=>["anonymous","use-credentials","",!0,!1].includes(e)},decoding:{type:String,required:!1,validator:e=>["async","auto","sync"].includes(e)},nonce:{type:[String],required:!1}},Oe=e=>{const t=v(()=>({provider:e.provider,preset:e.preset})),r=v(()=>({width:_(e.width),height:_(e.height),alt:e.alt,referrerpolicy:e.referrerpolicy,usemap:e.usemap,longdesc:e.longdesc,ismap:e.ismap,crossorigin:e.crossorigin===!0?"anonymous":e.crossorigin||void 0,loading:e.loading,decoding:e.decoding,nonce:e.nonce})),a=F(),s=v(()=>({...e.modifiers,width:_(e.width),height:_(e.height),format:e.format,quality:e.quality||a.options.quality,background:e.background,fit:e.fit}));return{options:t,attrs:r,modifiers:s}},Ie={...Me,placeholder:{type:[Boolean,String,Number,Array],required:!1},placeholderClass:{type:String,required:!1}},We=e=>e==="defer"||e===!1;function Ae(...e){var D;const t=typeof e[e.length-1]=="string"?e.pop():void 0;typeof e[0]!="string"&&e.unshift(t);let[r,a,s={}]=e;if(typeof r!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof a!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const i=O(),n=a,o=()=>q.value,u=()=>i.isHydrating?i.payload.data[r]:i.static.data[r];s.server=s.server??!0,s.default=s.default??o,s.getCachedData=s.getCachedData??u,s.lazy=s.lazy??!1,s.immediate=s.immediate??!0,s.deep=s.deep??q.deep,s.dedupe=s.dedupe??"cancel";const f=s.getCachedData(r,i),h=f!=null;if(!i._asyncData[r]||!s.immediate){(D=i.payload._errors)[r]??(D[r]=q.errorValue);const m=s.deep?x:K;i._asyncData[r]={data:m(h?f:s.default()),pending:x(!h),error:Q(i.payload._errors,r),status:x("idle"),_default:s.default}}const l={...i._asyncData[r]};delete l._default,l.refresh=l.execute=(m={})=>{if(i._asyncDataPromises[r]){if(We(m.dedupe??s.dedupe))return i._asyncDataPromises[r];i._asyncDataPromises[r].cancelled=!0}if(m._initial||i.isHydrating&&m._initial!==!1){const g=m._initial?f:s.getCachedData(r,i);if(g!=null)return Promise.resolve(g)}l.pending.value=!0,l.status.value="pending";const c=new Promise((g,d)=>{try{g(n(i))}catch(p){d(p)}}).then(async g=>{if(c.cancelled)return i._asyncDataPromises[r];let d=g;s.transform&&(d=await s.transform(g)),s.pick&&(d=Ne(d,s.pick)),i.payload.data[r]=d,l.data.value=d,l.error.value=q.errorValue,l.status.value="success"}).catch(g=>{if(c.cancelled)return i._asyncDataPromises[r];l.error.value=ee(g),l.data.value=C(s.default()),l.status.value="error"}).finally(()=>{c.cancelled||(l.pending.value=!1,delete i._asyncDataPromises[r])});return i._asyncDataPromises[r]=c,i._asyncDataPromises[r]},l.clear=()=>Ee(i,r);const y=()=>l.refresh({_initial:!0}),w=s.server!==!1&&i.payload.serverRendered;{const m=te();if(m&&!m._nuxtOnBeforeMountCbs){m._nuxtOnBeforeMountCbs=[];const d=m._nuxtOnBeforeMountCbs;X(()=>{d.forEach(p=>{p()}),d.splice(0,d.length)}),Y(()=>d.splice(0,d.length))}w&&i.isHydrating&&(l.error.value||f!=null)?(l.pending.value=!1,l.status.value=l.error.value?"error":"success"):m&&(i.payload.serverRendered&&i.isHydrating||s.lazy)&&s.immediate?m._nuxtOnBeforeMountCbs.push(y):s.immediate&&y();const c=re();if(s.watch){const d=Z(s.watch,()=>l.refresh());c&&E(d)}const g=i.hook("app:data:refresh",async d=>{(!d||d.includes(r))&&await l.refresh()});c&&E(g)}const b=Promise.resolve(i._asyncDataPromises[r]).then(()=>l);return Object.assign(b,l),b}function Ee(e,t){t in e.payload.data&&(e.payload.data[t]=void 0),t in e.payload._errors&&(e.payload._errors[t]=q.errorValue),e._asyncData[t]&&(e._asyncData[t].data.value=void 0,e._asyncData[t].error.value=q.errorValue,e._asyncData[t].pending.value=!1,e._asyncData[t].status.value="idle"),t in e._asyncDataPromises&&(e._asyncDataPromises[t]&&(e._asyncDataPromises[t].cancelled=!0),e._asyncDataPromises[t]=void 0)}function Ne(e,t){const r={};for(const a of t)r[a]=e[a];return r}const je=["src"],Fe=z({__name:"NuxtImg",props:Ie,emits:["load","error"],setup(e,{emit:t}){const r=e,a=se(),s=t,i=!1,n=F(),o=Oe(r),u=x(!1),f=x(),h=v(()=>n.getSizes(r.src,{...o.options.value,sizes:r.sizes,densities:r.densities,modifiers:{...o.modifiers.value,width:_(r.width),height:_(r.height)}})),l=v(()=>{const c={...o.attrs.value,"data-nuxt-img":""};return(!r.placeholder||u.value)&&(c.sizes=h.value.sizes,c.srcset=h.value.srcset),c}),y=v(()=>{let c=r.placeholder;if(c===""&&(c=!0),!c||u.value)return!1;if(typeof c=="string")return c;const g=Array.isArray(c)?c:typeof c=="number"?[c,c]:[10,10];return n(r.src,{...o.modifiers.value,width:g[0],height:g[1],quality:g[2]||50,blur:g[3]||3},o.options.value)}),w=v(()=>r.sizes?h.value.src:n(r.src,o.modifiers.value,o.options.value)),b=v(()=>y.value?y.value:w.value),m=O().isHydrating;return R(()=>{if(y.value){const c=new Image;w.value&&(c.src=w.value),r.sizes&&(c.sizes=h.value.sizes||"",c.srcset=h.value.srcset),c.onload=g=>{u.value=!0,s("load",g)},Ce("nuxt-image");return}f.value&&(f.value.complete&&m&&(f.value.getAttribute("data-error")?s("error",new Event("error")):s("load",new Event("load"))),f.value.onload=c=>{s("load",c)},f.value.onerror=c=>{s("error",c)})}),(c,g)=>(P(),$("img",ae({ref_key:"imgEl",ref:f,class:r.placeholder&&!u.value?r.placeholderClass:void 0},{...C(i)?{onerror:"this.setAttribute('data-error', 1)"}:{},...l.value,...C(a)},{src:b.value}),null,16,je))}}),Be={class:"programme-episode-number"},Ue=z({__name:"EpisodeNumber",props:{episodeNum:{}},setup(e){const t=e;function r(s){if(s&&s.length>0){const i=s.find(({system:n})=>n==="onscreen");if(i!==void 0)return i._value}}const a=r(t.episodeNum);return(s,i)=>(P(),$("span",Be,ie(C(a)),1))}}),Te={class:"categories"},He=["innerHTML"],Ve=z({__name:"Categories",props:{categories:{}},setup(e){function t(r){return`category--${r.replaceAll(/ /g,"-").toLowerCase()}`}return(r,a)=>(P(),$("div",Te,[(P(!0),$(ne,null,oe(r.categories,s=>(P(),$("span",{key:s,class:ce(["category",t(s)]),innerHTML:s},null,10,He))),128))]))}}),Le=Symbol.for("nuxt:client-only"),Re=z({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(e,{slots:t,attrs:r}){const a=x(!1);return R(()=>{a.value=!0}),le(Le,!0),s=>{var u;if(a.value)return(u=t.default)==null?void 0:u.call(t);const i=t.fallback||t.placeholder;if(i)return i();const n=s.fallback||s.placeholder||"",o=s.fallbackTag||s.placeholderTag||"span";return $(o,r,n)}}}),Ge=z({__name:"Progress",props:{start:{},stop:{}},setup(e){const t=e,r=new Date(t.start),s=new Date(t.stop).getTime()-r.getTime(),i=Date.now()-r.getTime();return(n,o)=>{const u=Re;return P(),de(u,null,{fallback:N(()=>o[0]||(o[0]=[j("progress",{value:"0",max:"100"},null,-1)])),default:N(()=>[j("progress",{value:i,max:s})]),_:1})}}});export{Fe as _,Ue as a,Ve as b,Ge as c,Ae as u};
